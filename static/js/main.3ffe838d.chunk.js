(this["webpackJsonpxcos-demo"]=this["webpackJsonpxcos-demo"]||[]).push([[0],{35:function(e,t){e.exports="data:image/jpeg;base64,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"},37:function(e,t,a){e.exports=a(81)},46:function(e,t,a){},55:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){"use strict";a.r(t);a(38),a(39);var o=a(0),n=a.n(o),l=a(30),i=a.n(l),r=(a(46),a(3)),c=a(4),s=a(5),A=a(6),m=a(2),p=a(7),u=a(20),g=a(31),F=a(14);u.a.use(g.a).use(F.a).init({lng:"zh-TW",backend:{loadPath:"/assets/i18n/{{ns}}/{{lng}}.json"},fallbackLng:"en",debug:!0,ns:["translations"],defaultNS:"translations",keySeparator:!1,interpolation:{escapeValue:!1,formatSeparator:","},react:{wait:!0}});u.a;var K=function(e){var t=Object(F.b)(),a=t.t,o=(t.i18n,""),l="";return e.concatStr&&(o=e.concatStr),e.preStr&&(l=e.preStr),n.a.createElement("div",null,l+" "+a(e.str+".label")+" "+o)},d=function(){var e=Object(F.b)(),t=(e.t,e.i18n);return n.a.createElement("div",{onChange:function(e){t.changeLanguage(e.target.value)}},n.a.createElement("input",{type:"radio",value:"en",name:"language",defaultChecked:!0})," En",n.a.createElement("input",{type:"radio",value:"zh-TW",name:"language"})," zh-TW")};a(55);var U=function(){return n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},n.a.createElement("a",{className:"navbar-brand",href:"#"},n.a.createElement(K,{str:"demo"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav mr-auto"},n.a.createElement("li",{className:"nav-item"},n.a.createElement("a",{className:"nav-link disabled",href:"#",tabIndex:"-1","aria-disabled":"true"},n.a.createElement(K,{str:"author",preStr:"R07944011",concatStr:"CMLAB"}))))),n.a.createElement("div",{class:"form-inline my-2 my-lg-0"},n.a.createElement(d,null)))},f=a(11),h=a.n(f),R=a(83),C=a(18),Q=a.n(C),v=(a(73),a(35)),B=a.n(v);var b=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(A.a)(t).call(this,e))).onChangeHandler=function(e){a.checkMimeType(e)&&a.setState({selectedFile:e.target.files[0],loaded:0})},a.onClickHandler=function(){if(null!==a.state.selectedFile){var e=new FormData;e.append("file",a.state.selectedFile),h.a.post("/upload",e,{onUploadProgress:function(e){a.setState({loaded:e.loaded/e.total*100})}}).then((function(e){console.log(e.statusText),a.props.setUploadedToCompare(a.state.selectedFile.name)}))}},a.handleSwitchChange=function(){a.setState((function(e){return{isLive:!e.isLive}}))},a.checkMimeType=function(e){for(var t=e.target.files,a="",o=["image/png","image/jpeg","image/gif","image/i=jpg"],n=0;n<t.length;n++)o.every((function(e){return t[n].type!==e}))&&(a+=t[n].type+" is not a supported format\n");return""===a||(e.target.value=null,console.log(a),!1)},a.getUploadComponent=function(){var e=null==a.state.selectedFile?B.a:URL.createObjectURL(a.state.selectedFile);return n.a.createElement("div",null,n.a.createElement("img",{src:e,className:"upload-preview",alt:"logo"}),n.a.createElement("form",{className:"mt-3"},n.a.createElement("div",{className:"form-group"},n.a.createElement("input",{type:"file",name:"file",className:"btn",onChange:a.onChangeHandler}),n.a.createElement(R.a,{max:"100",color:"success",value:a.state.loaded,className:"mt-3"},Math.round(a.state.loaded,2),"%"),n.a.createElement("button",{type:"button",className:"btn btn-success mt-3",onClick:a.onClickHandler},n.a.createElement(K,{str:"uploadBtn"})))))},a.getLiveStreamComponent=function(){return n.a.createElement("div",null,n.a.createElement(Q.a,{onTakePhoto:function(e){a.handleTakePhoto(e)},imageType:C.IMAGE_TYPES.JPG}),null==a.state.snapshot?"":n.a.createElement("img",{className:"upload-preview",src:a.state.snapshot}))},a.state={selectedFile:null,isLive:!1,snapshot:null},a.onChangeHandler=a.onChangeHandler.bind(Object(m.a)(a)),a.onClickHandler=a.onClickHandler.bind(Object(m.a)(a)),a.handleSwitchChange=a.handleSwitchChange.bind(Object(m.a)(a)),a.getUploadComponent=a.getUploadComponent.bind(Object(m.a)(a)),a.getLiveStreamComponent=a.getLiveStreamComponent.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"handleTakePhoto",value:function(e){var t=this;console.log("takePhoto"),console.log(e),this.setState({snapshot:e});var a=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var a=e.split(",")[0].split(":")[1].split(";")[0],o=new Uint8Array(t.length),n=0;n<t.length;n++)o[n]=t.charCodeAt(n);return new Blob([o],{type:a})}(e),o="livedemo_"+function(){var e=new Date,t=e.getFullYear(),a=e.getMonth()+1,o=e.getDate(),n=e.getHours(),l=e.getMinutes(),i=e.getSeconds();return t+"-"+a+"-"+o+"-"+n+"-"+l+"-"+i}()+"."+a.type.split("/")[1],n=new FormData;n.append("file",a,o),h.a.post("/upload",n,{onUploadProgress:function(e){t.setState({loaded:e.loaded/e.total*100})}}).then((function(e){console.log(e.statusText),t.props.setUploadedToCompare(o)}))}},{key:"render",value:function(){var e=this.state.isLive?this.getLiveStreamComponent():this.getUploadComponent();return n.a.createElement("div",null,n.a.createElement("div",{className:"custom-control custom-switch"},n.a.createElement("input",{type:"checkbox",className:"custom-control-input",id:"customSwitches",onChange:this.handleSwitchChange,readOnly:!0}),n.a.createElement("label",{className:"custom-control-label",htmlFor:"customSwitches"},n.a.createElement(K,{str:"liveStream"}))),e)}}]),t}(n.a.Component),E=(a(76),a(77),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(A.a)(t).call(this,e))).onClickHandler=function(e){a.props.chooseByFileName(e)},a.onClickHandler=a.onClickHandler.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this;return n.a.createElement("div",{class:"hovereffect col-lg-2 col-md-2 col-6 "+(this.props.item.active?"chosen":"")},n.a.createElement("div",{className:"card h-100"},n.a.createElement("img",{class:"img-fluid img-thumbnail",src:"/database/"+this.props.item.filename,alt:"img not found"}),n.a.createElement("div",{class:"overlay"},n.a.createElement("button",{type:"button",className:"btn info mt-3",onClick:function(){return e.onClickHandler(e.props.item.filename)}},this.props.item.active?"Unchoose":"Choose")),n.a.createElement("div",null,this.props.item.filename)))}}]),t}(n.a.Component)),N=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(A.a)(t).call(this,e))).chooseByFileName=function(e){for(var t=a.state.gallery,o=0;o<t.length;o++)e===t[o].filename?(t[o].active=!t[o].active,t[o].active?a.props.setGalleryToCompare(e):a.props.setGalleryToCompare("")):t[o].active=!1;a.setState({gallery:t})},a.state={gallery:[]},h.a.get("/image_list",{}).then((function(e){console.log(e),a.setState({gallery:e.data.map((function(e){return{filename:e,active:!1}}))})})).catch((function(e){console.log(e)})).finally((function(){})),a.chooseByFileName=a.chooseByFileName.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=this.state.gallery.map((function(t){return n.a.createElement(E,{item:t,chooseByFileName:e.chooseByFileName})}));return n.a.createElement("div",null,n.a.createElement("div",{class:"row text-center text-lg-left"},t))}}]),t}(n.a.Component),j=a(15),P=a(36),x=a.n(P),T=(a(78),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(A.a)(t).call(this,e))).getGalleryFilenames=function(){h.a.get("/image_list",{}).then((function(e){console.log(e),a.setState({gallery:e.data.map((function(e){return{filename:e,active:!1}}))})})).catch((function(e){console.log(e)})).finally((function(){}))},a.cleanResults=function(){a.setState({comparisonResultList:[]})},a.onClickHandler=function(e){e.length>0&&(a.cleanResults(),a.props.galleryFilename.length>0?a.execFastComparisons(e,[{filename:a.props.galleryFilename}]):a.execFastComparisons(e,a.state.gallery))},a.onClickHandlerFast=function(e){a.cleanResults(),a.execFastComparisons(e,a.state.gallery)},a.registerResultPic=function(e,t,o,n){console.log("In registerResultPic:"+n),a.setState({comparisonResultList:[].concat(Object(j.a)(a.state.comparisonResultList),[{picPath:e,score:t,pic_base64:o,explaination:n}])})},a.execFastComparisons=function(e,t){if(e.length>0){var o={filesToCompare:t.map((function(e){return e.filename})),uploadedFilename:e};h.a.post("/comparison",o).then((function(t){var o=t.data;return(o=o.sort((function(e,t){return parseFloat(t.score)-parseFloat(e.score)}))).slice(0,5).map((function(t){return a.execComparison(e,t.filename)})),o})).catch((function(e){console.log(e)})).finally()}},a.execComparison=function(e,t){h.a.get("/comparison",{params:{uploadedFilename:e,galleryFilename:t}}).then((function(e){console.log(">>>>> In comparison GET......"),console.log(e);var t=e.data[0],o=e.data[1],n=e.data[2],l=e.data[3];return a.registerResultPic(t,o,n,l),o})).catch((function(e){console.log(e)})).finally((function(e){a.cleanProgress(),a.regitsterProgress((e>.24?"The same person!":"Not similar!")+", xCos score: "+e),a.sortComparisonResult()}))},a.sortComparisonResult=function(){a.setState({comparisonResultList:Object(j.a)(a.state.comparisonResultList.sort((function(e,t){return parseFloat(t.score)-parseFloat(e.score)})))}),console.log("After sorting"),console.log(a.state.comparisonResultList)},a.regitsterProgress=function(e){a.setState({progressTextList:[].concat(Object(j.a)(a.state.progressTextList),[e])}),console.log(">>>>>"),console.log(a.state.progressTextList)},a.cleanProgress=function(){console.log(">>>>>. clean...."),a.setState({progressTextList:[]}),console.log(a.state.progressTextList)},a.getResultComponent=function(e){return n.a.createElement("div",null,n.a.createElement("img",{src:"data:image/jpg;base64,".concat(e.pic_base64),className:"App-logo img-fluid",alt:"no result yet"}),n.a.createElement("p",{className:"h6"},e.score>.24?n.a.createElement(K,{str:"theSamePerson",concatStr:", xCos score: "+e.score}):n.a.createElement(K,{str:"differentPersons",concatStr:", xCos score: "+e.score})),n.a.createElement("p",{className:"h6"},n.a.createElement(K,{str:"explanation",concatStr:": "+e.explaination})),n.a.createElement(x.a,{textAsButton:!0,displayText:"\u4e2d\u6587\u8a9e\u97f3\u89e3\u91cb",text:e.explaination,voice:"Google \u570b\u8a9e\uff08\u81fa\u7063\uff09"}))},a.state={progressTextList:[],comparisonResultList:[],uploadedFilename:"",comparisonResult:"",gallery:[]},a.onClickHandler=a.onClickHandler.bind(Object(m.a)(a)),a.onClickHandlerFast=a.onClickHandlerFast.bind(Object(m.a)(a)),a.regitsterProgress=a.regitsterProgress.bind(Object(m.a)(a)),a.registerResultPic=a.registerResultPic.bind(Object(m.a)(a)),a.cleanProgress=a.cleanProgress.bind(Object(m.a)(a)),a.execComparison=a.execComparison.bind(Object(m.a)(a)),a.execFastComparisons=a.execFastComparisons.bind(Object(m.a)(a)),a.getGalleryFilenames=a.getGalleryFilenames.bind(Object(m.a)(a)),a.sortComparisonResult=a.sortComparisonResult.bind(Object(m.a)(a)),a.cleanResults=a.cleanResults.bind(Object(m.a)(a)),a.getGalleryFilenames(),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this,t=n.a.createElement("button",{type:"button",className:"btn btn-primary mt-3",onClick:function(){return e.onClickHandler(e.props.uploadedFilename)}},n.a.createElement(K,{str:"compareBtn"})),a=(n.a.createElement("button",{type:"button",className:"btn btn-primary mt-3",onClick:function(){return e.onClickHandlerFast(e.props.uploadedFilename)}},"Compare!"),this.props.uploadedFilename.length>0?this.props.uploadedFilename:"----"),o=this.state.gallery.length>0?this.state.gallery.map((function(e){return e.filename})):"----",l=this.props.galleryFilename.length>0?this.props.galleryFilename:o[0]+"...",i=(this.state.progressTextList.map((function(e){return n.a.createElement("p",null,">>> "+e+"...")})),this.state.comparisonResultList.map((function(t){return e.getResultComponent(t)})));return n.a.createElement("div",null,n.a.createElement("div",{className:"row mt-3"},n.a.createElement("div",{className:"col"},n.a.createElement("p",{className:"h6"},n.a.createElement(K,{str:"compare",concatStr:a+" & "+l})," "),t)),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col"},i)))}}]),t}(n.a.Component)),y=(a(79),a(80),function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(A.a)(t).call(this,e))).setGalleryToCompare=function(e){a.setState({galleryFilename:e})},a.setUploadedToCompare=function(e){a.setState({uploadedFilename:e})},a.state={galleryFilename:"",uploadedFilename:""},a.setGalleryToCompare=a.setGalleryToCompare.bind(Object(m.a)(a)),a}return Object(p.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return n.a.createElement("div",{className:"App"},n.a.createElement(o.Suspense,{fallback:null},n.a.createElement("header",{className:"App-header"},n.a.createElement("div",{className:"container"},n.a.createElement(U,null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-sm-2"},n.a.createElement("h3",{class:"font-weight-light text-center text-lg-left mt-4 mb-0"},n.a.createElement(K,{str:"upload"})),n.a.createElement("hr",{class:"mt-1 mb-1"}),n.a.createElement(b,{setUploadedToCompare:this.setUploadedToCompare})),n.a.createElement("div",{className:"col-sm-10"},n.a.createElement("h3",{class:"font-weight-light text-center text-lg-left mt-4 mb-0"},n.a.createElement(K,{str:"results"})),n.a.createElement("hr",{class:"mt-1 mb-1"}),n.a.createElement(T,{uploadedFilename:this.state.uploadedFilename,galleryFilename:this.state.galleryFilename}),n.a.createElement("div",{className:"col-sm-12"},n.a.createElement("h3",{class:"font-weight-light text-center text-lg-left mt-4 mb-0"},n.a.createElement(K,{str:"gallery"})),n.a.createElement("hr",{class:"mt-1 mb-1"}),n.a.createElement(N,{setGalleryToCompare:this.setGalleryToCompare}))))))))}}]),t}(n.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(y,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[37,1,2]]]);
//# sourceMappingURL=main.3ffe838d.chunk.js.map